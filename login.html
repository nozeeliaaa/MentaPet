<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MentaPet ‚Äî Login</title>
<style>
:root{ --bg:#0f172a; --card:#0b0f1a; --text:#e5e7eb; --muted:#9ca3af; --primary:#8b5cf6; }
*{box-sizing:border-box} html,body{height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);}
body{ background: radial-gradient(1200px 600px at 20% 10%, #1f2937 0%, var(--bg) 55%, #030712 100%); }
.topbar{ text-align:center; padding:18px 12px;}
.topbar h1{ margin:0 0 6px; font-weight:800;}
.tagline{ margin:0; color:var(--muted); }
.select-grid{ max-width:480px; margin:40px auto; padding:16px; display:grid; gap:16px; }
.login-card { display:flex; flex-direction:column; gap:10px; padding:24px; border-radius:14px; background:#0b0f1a; border:1px solid #1f2937; }
.login-card h2{ text-align:center; margin-bottom:12px; }
.login-card input{ width:100%; padding:12px; border-radius:8px; border:1px solid #1f2937; background:#0a0f1a; color:var(--text); outline:none; }
.login-card input:focus{ border-color:var(--primary); box-shadow:0 0 4px var(--primary); }
.login-card button{ margin-top:10px; width:100%; padding:12px; border:none; border-radius:12px; background:var(--primary); color:#fff; font-weight:600; cursor:pointer; }
.login-card p{ text-align:center; color:var(--muted); margin-top:10px; }
.login-card a{ color:var(--primary); text-decoration:none; } .login-card a:hover{ text-decoration:underline; }
#error{ color:#ef4444; text-align:center; min-height:18px; }
</style>
</head>
<body class="mood-calm">
<!-- Auth helpers + redirect if already logged in -->
<script src="auth.js"></script>
<script>document.addEventListener('DOMContentLoaded', redirectIfAuthed);</script>

<header class="topbar">
  <h1>üêæ MentaPet</h1>
  <p class="tagline">Log in to access your mindful companion</p>
</header>

<main class="select-grid" id="main" tabindex="-1">
  <div class="login-card">
    <h2>Login</h2>
    <form id="loginForm">
      <input id="loginEmail" type="email" placeholder="Email" required />
      <input id="loginPassword" type="password" placeholder="Password" required />
      <button type="submit">Login</button>
    </form>
    <p id="error"></p>
    <p>Don't have an account? <a href="signup.html">Sign up</a></p>
  </div>
</main>

<script>
document.getElementById('loginForm').addEventListener('submit', function(e){
  e.preventDefault();
  const email = document.getElementById('loginEmail').value.trim().toLowerCase();
  const password = document.getElementById('loginPassword').value;
  const error = document.getElementById('error');

  if (loginWithEmailPassword(email, password)) {
    const pet = localStorage.getItem('mentapet:pet');
    window.location.href = pet ? 'room.html' : 'index.html';
  } else {
    error.textContent = 'Invalid email or password';
  }
});
</script>
</body>
</html>
